---
title: "US Labor Market"
author: "Arisa Thongngam"
date: "2025-12-01"
output: pdf_document
---


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
#install.packages("fredr")
install.packages(c("tidyr", "lubridate", "purrr"))
library(dplyr)
library(ggplot2)
library(lubridate)
library(tidyr)
library(purrr)
#library(fredr)
```


```{r, include = FALSE}
#CPI data for calculating inflation rate
#Real GDP for GDP growth (%change) (data comes in Quartery so convert the frequency to monthly)
#Women LFPR
#Men LFPR
#Unemployment rate
#Consider lag 1 for last year effect on this year
#Include year as a covariate
#Population growth or mortality rate

```

```{r, include = FALSE}
getwd()
#Reading data
CPI <- read.csv("data/CPI.csv")
GDP <- read.csv("data/GDP.csv")
MLFPR <- read.csv("data/MLFPR.csv")
WLFPR <- read.csv("data/WLFPR.csv")
UNRATE <- read.csv("data/UNRATE.csv")

head(MLFPR)
tail(CPI)

#Renaming observations
CPI <- CPI %>%
  rename(CPI = CPILFESL)

GDP <- GDP %>%
  rename(GDP = GDPC1)

MLFPR <- MLFPR %>%
  rename(MLFPR = Value)

WLFPR <- WLFPR %>%
  rename(WLFPR = Value)

UNRATE <- UNRATE %>%
  rename(UNRATE = Value)


#Converting the class of date from character to date.time
GDP$observation_date <- as.Date(GDP$observation_date)
class(GDP$observation_date)
#Converting GDP from Quarterly to Monthly
GDP_M <- GDP %>%
  #Adding a "month_seq" column
  #For each quarterly date, return a vector of three monthly dates
  mutate(month_seq = map(observation_date, ~ seq(.x, by = "1 month", length.out = 3))) %>%
  unnest(month_seq) %>%
  #Delete original observation date column
  select(-observation_date) %>% 
  #Rename the month_aeq column to "observation_date"
  rename(observation_date = month_seq) %>%
  #Sorting observation_date in a chronological order
  arrange(observation_date)
head(GDP_M)

CPI <- CPI[-c(247:249), ]
MLFPR <- MLFPR[-c(247:249), ]
WLFPR <- WLFPR[-c(247:249), ]
UNRATE <- UNRATE[-c(247:249), ]

CPI$observation_date <- as.Date(CPI$observation_date)
MLFPR$observation_date <- CPI$observation_date
WLFPR$observation_date <- CPI$observation_date
UNRATE$observation_date <- CPI$observation_date

#Merging
df1 <- CPI %>%
  left_join(MLFPR %>% select(observation_date, MLFPR),
            by = "observation_date") %>%
  left_join(WLFPR %>% select(observation_date, WLFPR),
            by = "observation_date") %>%
  left_join(UNRATE %>% select(observation_date, UNRATE),
            by = "observation_date") %>%
  left_join(GDP_M %>% select(observation_date, GDPC1),
            by = "observation_date")
  
head(df1)
  



head(UNRATE)
#df1 <- 
```

